[include mainsail.cfg]
[include autocommit.cfg]

#-------------------------#
#   HARDWARE COMPONENTS   #
#-------------------------#

# -------------------------------------------------------------------------------------------------------------------------
#                                                PRINTER KINEMATICS
# -------------------------------------------------------------------------------------------------------------------------
[printer]
kinematics: corexy
max_velocity:           300
max_accel:              3000 #10000
max_z_velocity:         15   #Max 15 for 12V TMC Drivers, can increase for 24V
max_z_accel:            350
#max_accel_to_decel:    1500 # аналог ускорений от 50% от макс ускорения и более
square_corner_velocity: 5.0


# -------------------------------------------------------------------------------------------------------------------------
#                                                MACHINE AXIS
# -------------------------------------------------------------------------------------------------------------------------
# X axis
[include config/hardware/axis/X/1.8deg.cfg]
# Y axis
[include config/hardware/axis/Y/1.8deg.cfg]
# Z axis
[include config/hardware/axis/Z/1.8deg.cfg]


# -------------------------------------------------------------------------------------------------------------------------
#                                                PRINTER DIMENSIONS
# -------------------------------------------------------------------------------------------------------------------------
[include config/hardware/axis/size/350mm.cfg]


# -------------------------------------------------------------------------------------------------------------------------
#                                                EXTRUDER
# -------------------------------------------------------------------------------------------------------------------------
[include config/hardware/extruder/cw2.cfg]


# -------------------------------------------------------------------------------------------------------------------------
#                                                HEATER BED
# -------------------------------------------------------------------------------------------------------------------------
[include config/hardware/heater_bed.cfg]


# -------------------------------------------------------------------------------------------------------------------------
#                                                TEMPERATURE SENSORS
# -------------------------------------------------------------------------------------------------------------------------
# [include config/hardware/temperature_sensors/rpi_temp.cfg]
# [include config/hardware/temperature_sensors/mcu_temp.cfg]
# [include config/hardware/temperature_sensors/toolhead_mcu_temp.cfg]
# [include config/hardware/temperature_sensors/cabinet_temp.cfg]
# [include config/hardware/temperature_sensors/chamber_temp.cfg]
# [include config/hardware/temperature_sensors/chamber_temp_toolhead.cfg] # This is not recommended as toolhead board temperature sensors are not accurate


# -------------------------------------------------------------------------------------------------------------------------
#                                                PROBE
# -------------------------------------------------------------------------------------------------------------------------
## Dockable probes, like Klicky, Euclid or equivalent (available also in virtual Z endstop variant)
[include config/hardware/probes/dockable.cfg]
# [include config/hardware/probes/dockable_virtual.cfg]


# -------------------------------------------------------------------------------------------------------------------------
#                                                FANS
# -------------------------------------------------------------------------------------------------------------------------
[include config/hardware/fans/hotend_fan.cfg]
[include config/hardware/fans/part_fan.cfg]
[include config/hardware/fans/controller_fan.cfg]
# [include config/hardware/fans/rpi_fan.cfg]


# -------------------------------------------------------------------------------------------------------------------------
#                                                FILTERS
# -------------------------------------------------------------------------------------------------------------------------
# [include config/hardware/filters/exhaust_filter.cfg]
# [include config/hardware/filters/nevermore_filter.cfg]


# -------------------------------------------------------------------------------------------------------------------------
#                                                DISPLAY
# -------------------------------------------------------------------------------------------------------------------------
[include config/hardware/displays/BTT_mini12864.cfg]


# -------------------------------------------------------------------------------------------------------------------------
#                                                LIGHTS AND LEDS
# -------------------------------------------------------------------------------------------------------------------------
# [include config/hardware/lights/fcob_white.cfg]
# [include config/hardware/lights/neopixel_caselight.cfg]
[include config/hardware/lights/toolhead_neopixels.cfg]


# -------------------------------------------------------------------------------------------------------------------------
#                                                ACCELEROMETER
# -------------------------------------------------------------------------------------------------------------------------
# [include config/hardware/accelerometers/adxl345_rpi.cfg] # For ADXL plugged directly on the Pi (official and recommended way)


# -------------------------------------------------------------------------------------------------------------------------
#                                                FILAMENT SENSORS
# -------------------------------------------------------------------------------------------------------------------------
# [include config/hardware/filament_sensors/motion_sensor.cfg]


# -------------------------------------------------------------------------------------------------------------------------
#                                                ERCF
# -------------------------------------------------------------------------------------------------------------------------
# !!! Select either all lines or none !!!
### Klippain is designed to be used with the ERCF Happy Hare software: https://github.com/moggieuk/ERCF-Software-V3
### Please run its own install script to get Happy Hare ready to be used
### Then, include all of the following files that are created during the installation of Happy Hare to enable ERCF in Klippain
# [include ercf_hardware.cfg]
# [include ercf_parameters.cfg]
# [include ercf_software.cfg]
# [include ercf_menu.cfg]   # Optional: use it if you also have a Mini12864 display to add the ERCF menu entries
# [include config/hardware/ercf.cfg]

# -------------------------------------------------------------------------------------------------------------------------
#                                                SERVOS
# -------------------------------------------------------------------------------------------------------------------------
# [include config/hardware/servos/probe_servo.cfg]
# [include config/hardware/servos/purgeclean_servo.cfg]
# [include config/hardware/servos/shared_probepurge_servo.cfg] # If one servo is used for both probe dock and purge bucket



#---------------------------------#
#   KLIPPER SOFTWARE COMPONENTS   #
#---------------------------------#

# -------------------------------------------------------------------------------------------------------------------------
#                                                FIRMWARE RETRACTION
# -------------------------------------------------------------------------------------------------------------------------
[include config/software/firmware_rectraction.cfg]

# -------------------------------------------------------------------------------------------------------------------------
#                                                TILTING
# -------------------------------------------------------------------------------------------------------------------------
[include config/software/quad_gantry_level_350.cfg]

### If you need to specify a tilting configuration for a custom sized printer, use your
### overrides.cfg file instead. These defaults are only made for common machines sizes

# -------------------------------------------------------------------------------------------------------------------------
#                                                AUTO Z CALIBRATION
# -------------------------------------------------------------------------------------------------------------------------
[include config/software/klicky-z-calibration.cfg]

# -------------------------------------------------------------------------------------------------------------------------
#                                                BED MESH
# -------------------------------------------------------------------------------------------------------------------------
[include config/software/bed_mesh_350mm.cfg]

### If you need to specify a bed mesh configuration for a custom sized printer, use your
### overrides.cfg file instead. These defaults are only made for common machines sizes

# -------------------------------------------------------------------------------------------------------------------------
#                                                INPUT SHAPER
# -------------------------------------------------------------------------------------------------------------------------
# [include config/software/input_shaper.cfg] # Don't forget to calibrate it!

# -------------------------------------------------------------------------------------------------------------------------
#                                                SENSORLESS HOMING
# -------------------------------------------------------------------------------------------------------------------------
# [include config/software/sensorless_TMC2209.cfg]

### Follow the Klipper documentation here: https://www.klipper3d.org/TMC_Drivers.html#sensorless-homing
### to find the best suited SGTHRS value according to your machine. Then add this value to your
### overrides.cfg as stated in the config/software/sensorless_homing.cfg file!



[include config/machine.cfg]
[include variables.cfg]
[include mcu.cfg]
# [include overrides.cfg]

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 59.355
#*# pid_ki = 3.217
#*# pid_kd = 273.776
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 22.102
#*# pid_ki = 1.504
#*# pid_kd = 81.226
#*#
#*# [probe]
